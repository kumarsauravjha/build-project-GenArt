<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Importing the Swiper files -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    <link rel="stylesheet" href="/style.css"/>
  
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>    
    <title>A Generative Art Gallery</title>

    
</head>
<body>
    <!-- <a href="RANDOM_SLIDER/index.html">RANDOM_SLIDER</a> -->
    <!-- <iframe src="RANDOM_SLIDER/index.html" title="Random Slider" height="800" width="800"></iframe> -->
    <!-- <iframe src="PACMAN/index.html" title="PACMAN" height="800" width="800"></iframe>     -->
    <!-- Slider main container -->
    <div class="swiper">
        <!-- Additional required wrapper -->
        <div class="swiper-wrapper">
        <!-- Slides -->
            <div class="swiper-slide" id="sketch_1">
                <iframe src="sketches/RANDOM_SLIDER/index.html" title="Random Slider" height="600" width="600" frameBorder="0"></iframe>
            </div>
            <div class="swiper-slide" id="sketch_2">
                <iframe src="sketches/PACMAN/index.html" title="PACMAN" height="600" width="600"></iframe>    
            </div>
            <div class="swiper-slide" id="sketch_3">SO What</div>
        </div>
        <!-- If we need pagination -->
        <div class="swiper-pagination"></div>
    
        <!-- If we need navigation buttons -->
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
    
        <!-- If we need scrollbar -->
        <div class="swiper-scrollbar"></div>
    </div> 
    
    <script>
        const swiper = new Swiper('.swiper', {
        // Optional parameters
        direction: 'horizontal',
        loop: false,

        // If we need pagination
        pagination: {
            el: '.swiper-pagination',
        },

        // Navigation arrows
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },

        // And if we need scrollbar
        scrollbar: {
            el: '.swiper-scrollbar',
        },
        });

        
        // Custom Code: only "load" a P5.js sketch when navigating to a slide
        swiper.on('slideChange', () => {
            // unload the sketch on the previous slide
            const prev_iframe = swiper.slides[swiper.previousIndex].querySelector('.sketch');
            if(prev_iframe) prev_iframe.src = "";

            // load the sketch on the new slide
            const iframe = swiper.slides[swiper.activeIndex].querySelector('.sketch');
            if (iframe) iframe.src = iframe.getAttribute('data-src');
        });        
    </script>
</body>
</html>